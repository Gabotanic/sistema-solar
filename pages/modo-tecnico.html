<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modo Técnico - Visitas de Hoy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="app-container">
        <main class="main-content">
            <section class="screen active">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 10px;">
                    <button onclick="window.location.href='../index.html'" class="nav-back-btn" style="background: none; border: none; cursor: pointer; font-size: 20px; color: #222;"><i class="fas fa-arrow-left"></i></button>
                    <h1 class="screen-title" style="flex: 1; text-align: center; margin: 0; font-size: 20px;">Visitas de Hoy</h1>
                </div>
                <div class="visit-date" style="color: #4CAF50; font-size: 15px; margin-bottom: 18px;">
                    <!-- JS will insert today's date here -->
                </div>
                <div class="visit-list">
                    <!-- Clientes dinámicamente insertados por JavaScript -->
                </div>
            </section>
        </main>
    </div>
    <script>
        // Set today's date in Spanish
        const meses = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
        const hoy = new Date();
        const fecha = `${hoy.getDate()} de ${meses[hoy.getMonth()]}, ${hoy.getFullYear()}`;
        document.querySelector('.visit-date').textContent = fecha;

        const clientes = [
            {
                nombre: 'Carlos Ramirez',
                direccion: 'Calle del Sol, 123, Santiago',
                codigoCliente: 'CL-001',
                tipoInstalacion: 'On-Grid',
                capacidadInstalada: '4.8',
                cantidadPaneles: '10',
                tecnicoResponsable: 'Juan Carrasco'
            },
            {
                nombre: 'Sofia Mendoza',
                direccion: 'Avenida Lo Solar, 456, TilTil',
                codigoCliente: 'CL-002',
                tipoInstalacion: 'Off-Grid',
                capacidadInstalada: '3.5',
                cantidadPaneles: '8',
                tecnicoResponsable: 'Ana Flores'
            },
            {
                nombre: 'Ricardo Torres',
                direccion: 'Camino la Luz, 789, Olmué',
                codigoCliente: 'CL-003',
                tipoInstalacion: 'Híbrido',
                capacidadInstalada: '6.0',
                cantidadPaneles: '15',
                tecnicoResponsable: 'Juan Carrasco'
            },
            {
                nombre: 'Isabel Vargas',
                direccion: 'Los Soles, 101, Tongoy',
                codigoCliente: 'CL-004',
                tipoInstalacion: 'On-Grid',
                capacidadInstalada: '5.5',
                cantidadPaneles: '12',
                tecnicoResponsable: 'Ana Flores'
            }
        ];

        // Función para abrir la página de mantenimiento
        function abrirMantenimiento(cliente) {
            const params = new URLSearchParams(cliente);
            const url = `ingreso-mantenimiento.html?${params.toString()}`;
            window.location.href = url;
        }
        
        // Función para renderizar la lista de clientes
        function renderizarClientes() {
            const visitList = document.querySelector('.visit-list');
            visitList.innerHTML = ''; // Limpiar lista existente
            clientes.forEach(cliente => {
                const visitCard = document.createElement('button');
                visitCard.className = 'visit-card';
                visitCard.onclick = () => abrirMantenimiento(cliente);

                visitCard.innerHTML = `
                    <div class="visit-info">
                        <div class="visit-name">${cliente.nombre}</div>
                        <div class="visit-address">${cliente.direccion}</div>
                    </div>
                    <span class="visit-status"></span>
                `;
                visitList.appendChild(visitCard);
            });
        }
        
        // Renderizar clientes al cargar la página
        document.addEventListener('DOMContentLoaded', renderizarClientes);

    </script>
</body>
</html> 